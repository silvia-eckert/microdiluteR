<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="microdiluteR">
<title>Tidy photometer data with `tidy_plates()` • microdiluteR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Tidy photometer data with `tidy_plates()`">
<meta property="og:description" content="microdiluteR">
<meta property="og:image" content="https://silvia-eckert.github.io/microdiluteR/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">microdiluteR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/testfile.html">testfile</a>
    <a class="dropdown-item" href="../articles/tidy_photometer_data.html">Tidy photometer data with `tidy_plates()`</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/silvia-eckert/microdiluteR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Tidy photometer data with `tidy_plates()`</h1>
                        <h4 data-toc-skip class="author">Silvia
Eckert</h4>
            
            <h4 data-toc-skip class="date">2024-05-09</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/silvia-eckert/microdiluteR/blob/HEAD/vignettes/articles/tidy_photometer_data.Rmd" class="external-link"><code>vignettes/articles/tidy_photometer_data.Rmd</code></a></small>
      <div class="d-none name"><code>tidy_photometer_data.Rmd</code></div>
    </div>

    
    
<p>During my work as a postdoc in various laboratories, I experienced
that old photometer devices are still in use, even if the associated
proprietary software (e.g. depending on an outdated operating system) is
no longer available. This is a good sign from an environmental point of
view (e.g. avoiding electronic waste), but is often more a question of
the laboratory’s financial resources. However, the absorption values
provided by these devices (e.g. in an 8 x 12 table format in simple text
files for 96-well plates) are usually analysed via a custom Excel
spreadsheet that someone created a long time ago and that everyone
relies on. This may work, as each type of photometer has its own file
structure, but Excel is itself proprietary software, i.e. not easily
accessible to everyone. Also, the steps are tedious in most cases as
only some of the analyses can be performed in it and only limited
experimental designs are supported. In contrast, R is an established
open source statistics software. So why not also use it as a tool to
organize photometer plate data, flexibly add experimental designs as
metadata and even perform at least some simple visualizations and
statistical analyses, all in one go?</p>
<div class="float">
<img src="https://upload.wikimedia.org/wikipedia/commons/0/07/96-Well_plate.svg" alt="A 96-well photometer plate is often used for broth microdilution assays."><div class="figcaption"><b>A <a href="https://upload.wikimedia.org/wikipedia/commons/0/07/96-Well_plate.svg" class="external-link">96-well
photometer plate</a> is often used for broth microdilution
assays.</b></div>
</div>
<p>The <code>microdiluteR</code> package is designed to help researchers
tidy up data from photometer plates and provides functions to easily add
metadata. Regardless of whether the user is processing a single plate or
multiple plates with complex metadata structures, the
<code><a href="../reference/tidy_plates.html">tidy_plates()</a></code> function provides flexibility and ease of use
to optimize the data processing workflow. This vignette guides the user
through a general workflow. For more specific use cases, please refer to
upcoming vignettes of this package. The <code>microdiluteR</code>
package was developed to support the analysis of <a href="https://en.wikipedia.org/wiki/Broth_microdilution" class="external-link">broth
microdilution assays</a>, but may be extended for other types of assays
in the future.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>After installing <a href="https://www.r-project.org/" class="external-link">R</a>, install
the <code>microdiluteR</code> package either via CRAN or install the
development version via GitHub using the following commands:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># via CRAN</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"microdiluteR"</span><span class="op">)</span></span>
<span><span class="co"># via GitHub</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/" class="external-link">devtools</a></span><span class="op">)</span></span>
<span><span class="fu">install_github</span><span class="op">(</span><span class="st">"silvia-eckert/microdiluteR"</span><span class="op">)</span></span></code></pre></div>
<p>The <code>microdiluteR</code> package can be loaded as follows:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://silvia-eckert.github.io/microdiluteR/">microdiluteR</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>To show the general workflow, we will use example data shipped with
the <code>microdiluteR</code> package. For use cases relying on
real-world data, please check out upcoming vignettes. The example data
used here is a list of multiple photometer measurements on 96-well
plates.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"bma"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">bma</span><span class="op">)</span> <span class="co"># check file names</span></span>
<span><span class="co">#&gt; [1] "bma_grp1_exp2_T0" "bma_grp1_exp2_T3" "bma_grp2_exp1_T0" "bma_grp2_exp1_T3"</span></span>
<span><span class="va">bma</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="co"># absorption values from first plate</span></span>
<span><span class="co">#&gt;       1     2     3     4     5     6     7     8     9    10    11    12</span></span>
<span><span class="co">#&gt; A 0.342 0.354 0.360 0.360 0.352 0.363 0.361 0.352 0.356 0.351 0.366 0.375</span></span>
<span><span class="co">#&gt; B 0.362 0.391 0.375 0.363 0.383 0.366 0.380 0.378 0.339 0.387 0.377 0.362</span></span>
<span><span class="co">#&gt; C 0.344 0.346 0.345 0.347 0.350 0.356 0.348 0.343 0.348 0.351 0.351 0.353</span></span>
<span><span class="co">#&gt; D 0.361 0.367 0.351 0.364 0.353 0.362 0.361 0.367 0.363 0.356 0.357 0.355</span></span>
<span><span class="co">#&gt; E 0.388 0.473 0.400 0.358 0.388 0.340 0.335 0.396 0.411 0.404 0.397 0.407</span></span>
<span><span class="co">#&gt; F 0.456 0.465 0.469 0.469 0.462 0.468 0.455 0.477 0.487 0.488 0.498 0.471</span></span>
<span><span class="co">#&gt; G 0.334 0.340 0.357 0.332 0.329 0.342 0.333 0.317 0.360 0.332 0.335 0.328</span></span>
<span><span class="co">#&gt; H 0.334 0.332 0.339 0.333 0.339 0.334 0.342 0.335 0.361 0.327 0.330 0.341</span></span></code></pre></div>
<p>The data also contains information on the experimental setup, which
can be retrieved using an attribute:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">bma</span>, <span class="st">"metadata"</span><span class="op">)</span> <span class="co"># check out the experimental setup</span></span>
<span><span class="co">#&gt;   plate_axis treatment concentration</span></span>
<span><span class="co">#&gt; 1          A       10%       100 ppm</span></span>
<span><span class="co">#&gt; 2          B       10%       200 ppm</span></span>
<span><span class="co">#&gt; 3          C       30%       100 ppm</span></span>
<span><span class="co">#&gt; 4          D       30%       200 ppm</span></span>
<span><span class="co">#&gt; 5          E      100%       100 ppm</span></span>
<span><span class="co">#&gt; 6          F      100%       200 ppm</span></span>
<span><span class="co">#&gt; 7          G   Control       100 ppm</span></span>
<span><span class="co">#&gt; 8          H   Control       200 ppm</span></span></code></pre></div>
<p>We can see that the plate has been loaded in a horizontal direction
(rows starting with A-H) denoted in the ‘plate_axis’ column. We can also
see that there are four treatment levels (10%, 30%, 100%, and a negative
control level), each being tested at two concentrations (100 ppm and 200
ppm). In the next step, we will try to add this metadata to the
absorption values measured. You can also get details of the experimental
setup using the help page of the data set:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="va">bma</span> <span class="co"># check out details on the experimental setup</span></span></code></pre></div>
<div class="section level3">
<h3 id="read-plates">Read plates<a class="anchor" aria-label="anchor" href="#read-plates"></a>
</h3>
<p>Before we dive into the magic of the <code><a href="../reference/tidy_plates.html">tidy_plates()</a></code>
function, let’s first have a look at the <code><a href="../reference/read_plates.html">read_plate()</a></code> and
<code><a href="../reference/read_plates.html">read_plates()</a></code> functions. If adding metadata is not desired
and the photometer data should only be loaded into R for inspection or
for custom analyses, this can be achieved as with the
<code><a href="../reference/read_plates.html">read_plate()</a></code> and <code><a href="../reference/read_plates.html">read_plates()</a></code> functions.
Let’s first create a temporary mock file:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="st">"Line with additional information, e.g. wavelength</span></span>
<span><span class="st"></span></span>
<span><span class="st">   1  2  3  4  5  6  7  8  9 10 11 12</span></span>
<span><span class="st">A  1  2  3  4  5  6  7  8  9 10 11 12</span></span>
<span><span class="st">B 13 14 15 16 17 18 19 20 21 22 23 24</span></span>
<span><span class="st">C 25 26 27 28 29 30 31 32 33 34 35 36</span></span>
<span><span class="st">D 37 38 39 40 41 42 43 44 45 46 47 48</span></span>
<span><span class="st">E 49 50 51 52 53 54 55 56 57 58 59 60</span></span>
<span><span class="st">F 61 62 63 64 65 66 67 68 69 70 71 72</span></span>
<span><span class="st">G 73 74 75 76 77 78 79 80 81 82 83 84</span></span>
<span><span class="st">H 85 86 87 88 89 90 91 92 93 94 95 96"</span></span>
<span><span class="va">file_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span><span class="va">data</span>, <span class="va">file_path</span>, sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></span></code></pre></div>
<p>Now we’ll read this file using <code><a href="../reference/read_plates.html">read_plate()</a></code> as
follows:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">temp_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_plates.html">read_plate</a></span><span class="op">(</span><span class="va">file_path</span>,</span>
<span>                        skip_lines <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="co"># skip the first two lines</span></span>
<span><span class="va">temp_file</span></span>
<span><span class="co">#&gt;    1  2  3  4  5  6  7  8  9 10 11 12</span></span>
<span><span class="co">#&gt; A  1  2  3  4  5  6  7  8  9 10 11 12</span></span>
<span><span class="co">#&gt; B 13 14 15 16 17 18 19 20 21 22 23 24</span></span>
<span><span class="co">#&gt; C 25 26 27 28 29 30 31 32 33 34 35 36</span></span>
<span><span class="co">#&gt; D 37 38 39 40 41 42 43 44 45 46 47 48</span></span>
<span><span class="co">#&gt; E 49 50 51 52 53 54 55 56 57 58 59 60</span></span>
<span><span class="co">#&gt; F 61 62 63 64 65 66 67 68 69 70 71 72</span></span>
<span><span class="co">#&gt; G 73 74 75 76 77 78 79 80 81 82 83 84</span></span>
<span><span class="co">#&gt; H 85 86 87 88 89 90 91 92 93 94 95 96</span></span>
<span><span class="co"># The skipped lines are stored here</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">temp_file</span>, <span class="st">"info"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Line with additional information, e.g. wavelength"</span></span>
<span><span class="co"># Remove the temporary file</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="va">file_path</span><span class="op">)</span></span></code></pre></div>
<p>We could also do this with multiple files using the
<code><a href="../reference/read_plates.html">read_plates()</a></code> function. The content of the files will be
concatenated into a single list that is ready for further processing,
e.g. with the <code><a href="../reference/tidy_plates.html">tidy_plates()</a></code> function. Let’s again create
two temporary files. This time, however, we will use a custom pattern
called “Assay_” to start the file names. This will make sure that only
these two files are considered from the temporary directory.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># File 1</span></span>
<span><span class="va">data_T0</span> <span class="op">&lt;-</span> <span class="st">"Line with additional information, e.g. wavelength</span></span>
<span><span class="st"></span></span>
<span><span class="st">   1  2  3  4  5  6  7  8  9 10 11 12</span></span>
<span><span class="st">A  1  2  3  4  5  6  7  8  9 10 11 12</span></span>
<span><span class="st">B 13 14 15 16 17 18 19 20 21 22 23 24</span></span>
<span><span class="st">C 25 26 27 28 29 30 31 32 33 34 35 36</span></span>
<span><span class="st">D 37 38 39 40 41 42 43 44 45 46 47 48</span></span>
<span><span class="st">E 49 50 51 52 53 54 55 56 57 58 59 60</span></span>
<span><span class="st">F 61 62 63 64 65 66 67 68 69 70 71 72</span></span>
<span><span class="st">G 73 74 75 76 77 78 79 80 81 82 83 84</span></span>
<span><span class="st">H 85 86 87 88 89 90 91 92 93 94 95 96"</span></span>
<span><span class="va">file_path_T0</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">"Assay_T0_"</span>,</span>
<span>                         fileext <span class="op">=</span> <span class="st">".txt"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span><span class="va">data_T0</span>, <span class="va">file_path_T0</span>, sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co"># File 2</span></span>
<span><span class="va">data_T1</span> <span class="op">&lt;-</span> <span class="st">"Line with additional information, e.g. wavelength</span></span>
<span><span class="st"></span></span>
<span><span class="st">   1  2  3  4  5  6  7  8  9 10 11 12</span></span>
<span><span class="st">A  1  2  3  4  5  6  7  8  9 10 11 12</span></span>
<span><span class="st">B 13 14 15 16 17 18 19 20 21 22 23 24</span></span>
<span><span class="st">C 25 26 27 28 29 30 31 32 33 34 35 36</span></span>
<span><span class="st">D 37 38 39 40 41 42 43 44 45 46 47 48</span></span>
<span><span class="st">E 49 50 51 52 53 54 55 56 57 58 59 60</span></span>
<span><span class="st">F 61 62 63 64 65 66 67 68 69 70 71 72</span></span>
<span><span class="st">G 73 74 75 76 77 78 79 80 81 82 83 84</span></span>
<span><span class="st">H 85 86 87 88 89 90 91 92 93 94 95 96"</span></span>
<span><span class="va">file_path_T1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">"Assay_T1_"</span>,</span>
<span>                         fileext <span class="op">=</span> <span class="st">".txt"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span><span class="va">data_T1</span>, <span class="va">file_path_T1</span>, sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="va">file_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">dirname</a></span><span class="op">(</span><span class="va">file_path_T1</span><span class="op">)</span></span></code></pre></div>
<p>Now we’ll apply the <code><a href="../reference/read_plates.html">read_plates()</a></code> function similarly to
<code><a href="../reference/read_plates.html">read_plate()</a></code> as follows:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">temp_files</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_plates.html">read_plates</a></span><span class="op">(</span><span class="va">file_dir</span>,</span>
<span>                        pattern <span class="op">=</span> <span class="st">"Assay_T"</span>, <span class="co"># our custom pattern</span></span>
<span>                        skip_lines <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="co"># skip the first two lines</span></span>
<span><span class="va">temp_files</span></span>
<span><span class="co">#&gt; $Assay_T0_19482d39c593</span></span>
<span><span class="co">#&gt;    1  2  3  4  5  6  7  8  9 10 11 12</span></span>
<span><span class="co">#&gt; A  1  2  3  4  5  6  7  8  9 10 11 12</span></span>
<span><span class="co">#&gt; B 13 14 15 16 17 18 19 20 21 22 23 24</span></span>
<span><span class="co">#&gt; C 25 26 27 28 29 30 31 32 33 34 35 36</span></span>
<span><span class="co">#&gt; D 37 38 39 40 41 42 43 44 45 46 47 48</span></span>
<span><span class="co">#&gt; E 49 50 51 52 53 54 55 56 57 58 59 60</span></span>
<span><span class="co">#&gt; F 61 62 63 64 65 66 67 68 69 70 71 72</span></span>
<span><span class="co">#&gt; G 73 74 75 76 77 78 79 80 81 82 83 84</span></span>
<span><span class="co">#&gt; H 85 86 87 88 89 90 91 92 93 94 95 96</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Assay_T1_19487239cb9</span></span>
<span><span class="co">#&gt;    1  2  3  4  5  6  7  8  9 10 11 12</span></span>
<span><span class="co">#&gt; A  1  2  3  4  5  6  7  8  9 10 11 12</span></span>
<span><span class="co">#&gt; B 13 14 15 16 17 18 19 20 21 22 23 24</span></span>
<span><span class="co">#&gt; C 25 26 27 28 29 30 31 32 33 34 35 36</span></span>
<span><span class="co">#&gt; D 37 38 39 40 41 42 43 44 45 46 47 48</span></span>
<span><span class="co">#&gt; E 49 50 51 52 53 54 55 56 57 58 59 60</span></span>
<span><span class="co">#&gt; F 61 62 63 64 65 66 67 68 69 70 71 72</span></span>
<span><span class="co">#&gt; G 73 74 75 76 77 78 79 80 81 82 83 84</span></span>
<span><span class="co">#&gt; H 85 86 87 88 89 90 91 92 93 94 95 96</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; attr(,"info")</span></span>
<span><span class="co">#&gt;               File_name                                         Attribute</span></span>
<span><span class="co">#&gt; 1 Assay_T0_19482d39c593 Line with additional information, e.g. wavelength</span></span>
<span><span class="co">#&gt; 2  Assay_T1_19487239cb9 Line with additional information, e.g. wavelength</span></span>
<span><span class="co"># Remove temporary files</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="va">file_path_T0</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="va">file_path_T1</span><span class="op">)</span></span></code></pre></div>
<p>These functions are purely for inspection or for custom use. To add
metadata, these function are not necessary and users can directly apply
the <code><a href="../reference/tidy_plates.html">tidy_plates()</a></code> function on either single files, a folder
pointing to single or multiple files (using custom patterns if
necessary) or lists of photometer data already loaded into R (with
<code><a href="../reference/read_plates.html">read_plate()</a></code>, <code><a href="../reference/read_plates.html">read_plates()</a></code> or any other
function as long as as a list structure is preserved).</p>
</div>
<div class="section level3">
<h3 id="tidy-data-from-a-single-plate">Tidy data from a single plate<a class="anchor" aria-label="anchor" href="#tidy-data-from-a-single-plate"></a>
</h3>
<p>Tidying data from a single photometer plate is straightforward.
Simply provide your input data to <code><a href="../reference/tidy_plates.html">tidy_plates()</a></code>, set the
desired metadata and it will handle the rest. Your input data can be a
file name, a folder pointing to this file (given there are no other
interfering files, or else use a pattern) or a list element that has
already been read into R. Here, we will use the first data set from
<code>bma</code> and apply the metadata provided in the attributes:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">single_plate_data</span> <span class="op">&lt;-</span> <span class="va">bma</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>; <span class="va">single_plate_data</span></span>
<span><span class="co">#&gt; $bma_grp1_exp2_T0</span></span>
<span><span class="co">#&gt;       1     2     3     4     5     6     7     8     9    10    11    12</span></span>
<span><span class="co">#&gt; A 0.342 0.354 0.360 0.360 0.352 0.363 0.361 0.352 0.356 0.351 0.366 0.375</span></span>
<span><span class="co">#&gt; B 0.362 0.391 0.375 0.363 0.383 0.366 0.380 0.378 0.339 0.387 0.377 0.362</span></span>
<span><span class="co">#&gt; C 0.344 0.346 0.345 0.347 0.350 0.356 0.348 0.343 0.348 0.351 0.351 0.353</span></span>
<span><span class="co">#&gt; D 0.361 0.367 0.351 0.364 0.353 0.362 0.361 0.367 0.363 0.356 0.357 0.355</span></span>
<span><span class="co">#&gt; E 0.388 0.473 0.400 0.358 0.388 0.340 0.335 0.396 0.411 0.404 0.397 0.407</span></span>
<span><span class="co">#&gt; F 0.456 0.465 0.469 0.469 0.462 0.468 0.455 0.477 0.487 0.488 0.498 0.471</span></span>
<span><span class="co">#&gt; G 0.334 0.340 0.357 0.332 0.329 0.342 0.333 0.317 0.360 0.332 0.335 0.328</span></span>
<span><span class="co">#&gt; H 0.334 0.332 0.339 0.333 0.339 0.334 0.342 0.335 0.361 0.327 0.330 0.341</span></span>
<span><span class="va">tidy_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tidy_plates.html">tidy_plates</a></span><span class="op">(</span><span class="va">single_plate_data</span>,</span>
<span>                       how_many <span class="op">=</span> <span class="st">"single"</span>, <span class="co"># tidy single plate</span></span>
<span>                       direction <span class="op">=</span> <span class="st">"horizontal"</span>,</span>
<span>                       group_ID <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>                       experiment_name <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>                       validity_method <span class="op">=</span> <span class="st">"threshold"</span>,</span>
<span>                       threshold <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                       treatment_labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"10%"</span>, <span class="st">"30%"</span>, <span class="st">"100%"</span>, <span class="st">"Control"</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>,</span>
<span>                       concentration_levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">200</span><span class="op">)</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span> <span class="co"># numeric</span></span></code></pre></div>
<p>We see that we could have also provided a group identifier or an
experiment name. This was not necessary here, but we could update our
code to denote e.g. the pathogen used as the test organism (here <a href="https://en.wikipedia.org/wiki/Botrytis_cinerea" class="external-link"><em>Botrytis
cinerea</em></a>) in the group identifier or give the plate measurement
an experiment name (e.g. “Assay 1”). Let’s do this:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tidy_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tidy_plates.html">tidy_plates</a></span><span class="op">(</span><span class="va">single_plate_data</span>,</span>
<span>                       how_many <span class="op">=</span> <span class="st">"single"</span>,</span>
<span>                       direction <span class="op">=</span> <span class="st">"horizontal"</span>,</span>
<span>                       group_ID <span class="op">=</span> <span class="st">"Botrytis cinerea"</span>, <span class="co"># add test organism</span></span>
<span>                       experiment_name <span class="op">=</span> <span class="st">"Assay 1"</span>, <span class="co"># add plate name</span></span>
<span>                       validity_method <span class="op">=</span> <span class="st">"threshold"</span>,</span>
<span>                       threshold <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                       treatment_labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"10%"</span>, <span class="st">"30%"</span>, <span class="st">"100%"</span>, <span class="st">"Control"</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>,</span>
<span>                       concentration_levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">200</span><span class="op">)</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The resulting tidy table looks as follows:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">tidy_df</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="8%">
<col width="5%">
<col width="8%">
<col width="9%">
<col width="13%">
<col width="9%">
<col width="16%">
<col width="16%">
<col width="10%">
</colgroup>
<thead><tr class="header">
<th align="left">Position</th>
<th align="right">Value</th>
<th align="left">Validity</th>
<th align="left">Treatment</th>
<th align="right">Concentration</th>
<th align="left">Timepoint</th>
<th align="left">File</th>
<th align="left">Group</th>
<th align="left">Experiment</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">A-1</td>
<td align="right">0.342</td>
<td align="left">valid</td>
<td align="left">10%</td>
<td align="right">100</td>
<td align="left">T0</td>
<td align="left">bma_grp1_exp2_T0</td>
<td align="left">Botrytis cinerea</td>
<td align="left">Assay 1</td>
</tr>
<tr class="even">
<td align="left">A-2</td>
<td align="right">0.354</td>
<td align="left">valid</td>
<td align="left">10%</td>
<td align="right">100</td>
<td align="left">T0</td>
<td align="left">bma_grp1_exp2_T0</td>
<td align="left">Botrytis cinerea</td>
<td align="left">Assay 1</td>
</tr>
<tr class="odd">
<td align="left">A-3</td>
<td align="right">0.360</td>
<td align="left">valid</td>
<td align="left">10%</td>
<td align="right">100</td>
<td align="left">T0</td>
<td align="left">bma_grp1_exp2_T0</td>
<td align="left">Botrytis cinerea</td>
<td align="left">Assay 1</td>
</tr>
<tr class="even">
<td align="left">A-4</td>
<td align="right">0.360</td>
<td align="left">valid</td>
<td align="left">10%</td>
<td align="right">100</td>
<td align="left">T0</td>
<td align="left">bma_grp1_exp2_T0</td>
<td align="left">Botrytis cinerea</td>
<td align="left">Assay 1</td>
</tr>
<tr class="odd">
<td align="left">A-5</td>
<td align="right">0.352</td>
<td align="left">valid</td>
<td align="left">10%</td>
<td align="right">100</td>
<td align="left">T0</td>
<td align="left">bma_grp1_exp2_T0</td>
<td align="left">Botrytis cinerea</td>
<td align="left">Assay 1</td>
</tr>
<tr class="even">
<td align="left">A-6</td>
<td align="right">0.363</td>
<td align="left">valid</td>
<td align="left">10%</td>
<td align="right">100</td>
<td align="left">T0</td>
<td align="left">bma_grp1_exp2_T0</td>
<td align="left">Botrytis cinerea</td>
<td align="left">Assay 1</td>
</tr>
<tr class="odd">
<td align="left">A-7</td>
<td align="right">0.361</td>
<td align="left">valid</td>
<td align="left">10%</td>
<td align="right">100</td>
<td align="left">T0</td>
<td align="left">bma_grp1_exp2_T0</td>
<td align="left">Botrytis cinerea</td>
<td align="left">Assay 1</td>
</tr>
<tr class="even">
<td align="left">A-8</td>
<td align="right">0.352</td>
<td align="left">valid</td>
<td align="left">10%</td>
<td align="right">100</td>
<td align="left">T0</td>
<td align="left">bma_grp1_exp2_T0</td>
<td align="left">Botrytis cinerea</td>
<td align="left">Assay 1</td>
</tr>
<tr class="odd">
<td align="left">A-9</td>
<td align="right">0.356</td>
<td align="left">valid</td>
<td align="left">10%</td>
<td align="right">100</td>
<td align="left">T0</td>
<td align="left">bma_grp1_exp2_T0</td>
<td align="left">Botrytis cinerea</td>
<td align="left">Assay 1</td>
</tr>
<tr class="even">
<td align="left">A-10</td>
<td align="right">0.351</td>
<td align="left">valid</td>
<td align="left">10%</td>
<td align="right">100</td>
<td align="left">T0</td>
<td align="left">bma_grp1_exp2_T0</td>
<td align="left">Botrytis cinerea</td>
<td align="left">Assay 1</td>
</tr>
</tbody>
</table>
<p>We see that the timepoint was added automatically and we didn’t have
to specify it explicitely. That’s because the timepoint was extracted
from the file name ‘bma_grp1_exp1_T0”. The file name also contains
’bma’, ‘grp1’ and ‘exp1’ as identifiers. This will become important in
the next section when several plates are read.</p>
</div>
<div class="section level3">
<h3 id="prepare-file-names">Prepare file names<a class="anchor" aria-label="anchor" href="#prepare-file-names"></a>
</h3>
<p>The easiest way to prepare your files for use with the
<code><a href="../reference/tidy_plates.html">tidy_plates()</a></code> function is to add a pattern at the beginning
of the file names. Simply use the beginning of your file name and leave
the rest of the file name unchanged to make sure you still know what
your file is about. If we have a look at the file names of the
<code>bma</code> dataset, we see that they have a specific pattern
including ‘grp1’, ‘grp2’, ‘exp1’, ‘exp2’, as well as timepoints (‘T0’
and ‘T1’). These patterns are necessary for <code><a href="../reference/tidy_plates.html">tidy_plates()</a></code>
to correctly assign the group and experiment names. For example, we
could have repeated the experiment from the above-mentioned plate called
‘Assay 1’ but used other concentrations or even other chemicals or
antibiotics, now using ‘Assay 2’ as the experiment name for this plate.
Additionally, we could also have repeated these experiments with another
test organism, e.g. <em>Penicillium digitatum</em> instead of <em>B.
cinerea</em>. Adding plate data from measurements with this second test
organism, we need to specify it in the group name.</p>
<p>We would assign the identifier “grp1” to the files from experiments
with <em>B. cinerea</em>, the identifier “grp2” to the files from
experiments with <em>P. digitatum</em> (and so on if there are
experiments with other test organisms). The same applies, if there are
multiple experiments with each of the test organisms, where “exp1”
stands for the first set-up and “exp2” for the second set-up. As the
plates are measured multiple times, a time point identifier is required,
which is either T0 (T1, …) or t0 (t1, …). All files should have “BMA” or
“bma” (which stands for ‘broth microdilution assay’ but a user-defined
pattern such as “Assay_” is also fine) at the beginning of their name to
distinguish them from other files located in the same folder.</p>
<p>This may sound a bit tedious, as you have to partially rename your
files, but it helps a lot to identify the different groups and
experiments. Photometers often only provide cryptic file names,
consisting of a combination of letters or a sequence of numbers or just
the date of the measurement, so renaming is often necessary for the sake
of clarity anyway. The following table illustrates an example of a
renaming strategy:</p>
<table style="width:100%;" class="table">
<colgroup>
<col width="22%">
<col width="39%">
<col width="19%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th align="left">Original names</th>
<th align="left">Renamed files</th>
<th align="right">Group</th>
<th align="right">Experiment</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">F0001.txt</td>
<td align="left">BMA_grp1_exp1_T0_F0001.txt</td>
<td align="right">B. cinerea</td>
<td align="right">Fungizide A</td>
</tr>
<tr class="even">
<td align="left">F0002.txt</td>
<td align="left">BMA_grp1_exp1_T1_F0002.txt</td>
<td align="right">B. cinerea</td>
<td align="right">Fungizide A</td>
</tr>
<tr class="odd">
<td align="left">F0003.txt</td>
<td align="left">BMA_grp1_exp1_T2_F0003.txt</td>
<td align="right">B. cinerea</td>
<td align="right">Fungizide A</td>
</tr>
<tr class="even">
<td align="left">F0004.txt</td>
<td align="left">BMA_grp1_exp2_T0_F0004.txt</td>
<td align="right">B. cinerea</td>
<td align="right">Fungizide B</td>
</tr>
<tr class="odd">
<td align="left">F0005.txt</td>
<td align="left">BMA_grp1_exp2_T1_F0005.txt</td>
<td align="right">B. cinerea</td>
<td align="right">Fungizide B</td>
</tr>
<tr class="even">
<td align="left">F0006.txt</td>
<td align="left">BMA_grp1_exp2_T2_F0006.txt</td>
<td align="right">B. cinerea</td>
<td align="right">Fungizide B</td>
</tr>
<tr class="odd">
<td align="left">F0007.txt</td>
<td align="left">BMA_grp2_exp1_T0_F0007.txt</td>
<td align="right">P. digitatum</td>
<td align="right">Fungizide A</td>
</tr>
<tr class="even">
<td align="left">F0008.txt</td>
<td align="left">BMA_grp2_exp1_T1_F0008.txt</td>
<td align="right">P. digitatum</td>
<td align="right">Fungizide A</td>
</tr>
<tr class="odd">
<td align="left">F0009.txt</td>
<td align="left">BMA_grp2_exp1_T2_F0009.txt</td>
<td align="right">P. digitatum</td>
<td align="right">Fungizide A</td>
</tr>
<tr class="even">
<td align="left">F0010.txt</td>
<td align="left">BMA_grp2_exp3_T0_F0010.txt</td>
<td align="right">P. digitatum</td>
<td align="right">Fungizide C</td>
</tr>
<tr class="odd">
<td align="left">F0011.txt</td>
<td align="left">BMA_grp2_exp3_T1_F0011.txt</td>
<td align="right">P. digitatum</td>
<td align="right">Fungizide C</td>
</tr>
<tr class="even">
<td align="left">F0012.txt</td>
<td align="left">BMA_grp2_exp3_T2_F0012.txt</td>
<td align="right">P. digitatum</td>
<td align="right">Fungizide C</td>
</tr>
</tbody>
</table>
<p>In our <code>bma</code> example data, we have the following file
names:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">bma</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "bma_grp1_exp2_T0" "bma_grp1_exp2_T3" "bma_grp2_exp1_T0" "bma_grp2_exp1_T3"</span></span></code></pre></div>
<p>This means, we have two groups, and one experiment per group, but
each experiment measured at timepoint T0 and T3.</p>
</div>
<div class="section level3">
<h3 id="tidy-data-from-multiple-plates-with-a-common-experimental-setup">Tidy data from multiple plates with a common experimental setup<a class="anchor" aria-label="anchor" href="#tidy-data-from-multiple-plates-with-a-common-experimental-setup"></a>
</h3>
<p>Since all measurements in <code>bma</code> were performed under a
common treatment and concentration setting, we will apply this metadata
all at once. In this case, we need to specify that we want to clean
multiple plates.</p>
<div class="section level4">
<h4 id="tidy-via-function-parameters">Tidy via function parameters<a class="anchor" aria-label="anchor" href="#tidy-via-function-parameters"></a>
</h4>
<p>The function <code><a href="../reference/tidy_plates.html">tidy_plates()</a></code> offers to options here to add
metadata and it depends on the preference of the user which option feels
more convenient. Users are free to add metadata either by parameters or
via user prompts. At first, we will use parameters to do so:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">multiple_plates_data</span> <span class="op">&lt;-</span> <span class="va">bma</span></span>
<span><span class="va">tidy_dfs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tidy_plates.html">tidy_plates</a></span><span class="op">(</span></span>
<span>  <span class="va">multiple_plates_data</span>,</span>
<span>  how_many <span class="op">=</span> <span class="st">"multiple"</span>, <span class="co"># changed from "single"</span></span>
<span>  direction <span class="op">=</span> <span class="st">"horizontal"</span>,</span>
<span>  group_ID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Botrytis cinerea"</span>, <span class="st">"P. digitatum"</span><span class="op">)</span>, <span class="co"># additional group added</span></span>
<span>  experiment_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Assay 1"</span>, <span class="st">"Assay 2"</span><span class="op">)</span>, <span class="co"># additional experiment added</span></span>
<span>  validity_method <span class="op">=</span> <span class="st">"threshold"</span>,</span>
<span>  threshold <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  treatment_labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"10%"</span>, <span class="st">"30%"</span>, <span class="st">"100%"</span>, <span class="st">"Control"</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>,</span>
<span>  concentration_levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">200</span><span class="op">)</span>, <span class="fl">4</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>Let’s have a look at the resulting table:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">tidy_dfs</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="8%">
<col width="5%">
<col width="8%">
<col width="9%">
<col width="13%">
<col width="9%">
<col width="16%">
<col width="16%">
<col width="10%">
</colgroup>
<thead><tr class="header">
<th align="left">Position</th>
<th align="right">Value</th>
<th align="left">Validity</th>
<th align="left">Treatment</th>
<th align="right">Concentration</th>
<th align="left">Timepoint</th>
<th align="left">File</th>
<th align="left">Group</th>
<th align="left">Experiment</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">A-1</td>
<td align="right">0.342</td>
<td align="left">valid</td>
<td align="left">10%</td>
<td align="right">100</td>
<td align="left">T0</td>
<td align="left">bma_grp1_exp2_T0</td>
<td align="left">Botrytis cinerea</td>
<td align="left">Assay 2</td>
</tr>
<tr class="even">
<td align="left">A-2</td>
<td align="right">0.354</td>
<td align="left">valid</td>
<td align="left">10%</td>
<td align="right">100</td>
<td align="left">T0</td>
<td align="left">bma_grp1_exp2_T0</td>
<td align="left">Botrytis cinerea</td>
<td align="left">Assay 2</td>
</tr>
<tr class="odd">
<td align="left">A-3</td>
<td align="right">0.360</td>
<td align="left">valid</td>
<td align="left">10%</td>
<td align="right">100</td>
<td align="left">T0</td>
<td align="left">bma_grp1_exp2_T0</td>
<td align="left">Botrytis cinerea</td>
<td align="left">Assay 2</td>
</tr>
<tr class="even">
<td align="left">A-4</td>
<td align="right">0.360</td>
<td align="left">valid</td>
<td align="left">10%</td>
<td align="right">100</td>
<td align="left">T0</td>
<td align="left">bma_grp1_exp2_T0</td>
<td align="left">Botrytis cinerea</td>
<td align="left">Assay 2</td>
</tr>
<tr class="odd">
<td align="left">A-5</td>
<td align="right">0.352</td>
<td align="left">valid</td>
<td align="left">10%</td>
<td align="right">100</td>
<td align="left">T0</td>
<td align="left">bma_grp1_exp2_T0</td>
<td align="left">Botrytis cinerea</td>
<td align="left">Assay 2</td>
</tr>
<tr class="even">
<td align="left">A-6</td>
<td align="right">0.363</td>
<td align="left">valid</td>
<td align="left">10%</td>
<td align="right">100</td>
<td align="left">T0</td>
<td align="left">bma_grp1_exp2_T0</td>
<td align="left">Botrytis cinerea</td>
<td align="left">Assay 2</td>
</tr>
<tr class="odd">
<td align="left">A-7</td>
<td align="right">0.361</td>
<td align="left">valid</td>
<td align="left">10%</td>
<td align="right">100</td>
<td align="left">T0</td>
<td align="left">bma_grp1_exp2_T0</td>
<td align="left">Botrytis cinerea</td>
<td align="left">Assay 2</td>
</tr>
<tr class="even">
<td align="left">A-8</td>
<td align="right">0.352</td>
<td align="left">valid</td>
<td align="left">10%</td>
<td align="right">100</td>
<td align="left">T0</td>
<td align="left">bma_grp1_exp2_T0</td>
<td align="left">Botrytis cinerea</td>
<td align="left">Assay 2</td>
</tr>
<tr class="odd">
<td align="left">A-9</td>
<td align="right">0.356</td>
<td align="left">valid</td>
<td align="left">10%</td>
<td align="right">100</td>
<td align="left">T0</td>
<td align="left">bma_grp1_exp2_T0</td>
<td align="left">Botrytis cinerea</td>
<td align="left">Assay 2</td>
</tr>
<tr class="even">
<td align="left">A-10</td>
<td align="right">0.351</td>
<td align="left">valid</td>
<td align="left">10%</td>
<td align="right">100</td>
<td align="left">T0</td>
<td align="left">bma_grp1_exp2_T0</td>
<td align="left">Botrytis cinerea</td>
<td align="left">Assay 2</td>
</tr>
</tbody>
</table>
<p>Keep in mind that the naming strategy will be performed sequentially.
This means that, for example, ‘Assay 1’ will be applied to identifier
‘exp1’. But since only files of the second group, <em>P. digitatum</em>,
contain ‘exp1’ as identifier, all experiments with <em>P. digitatum</em>
will be assigned to ‘Assay 1’ and all experiments with <em>B.
cinerea</em> will be assigned to ‘Assay 2’.</p>
</div>
<div class="section level4">
<h4 id="tidy-via-user-prompts">Tidy via user prompts<a class="anchor" aria-label="anchor" href="#tidy-via-user-prompts"></a>
</h4>
<p>Another way to add metadata is to prompt the user. In this way, each
part, from the group name to the concentration level, is queried in
turn.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tidy_dfs_prompts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tidy_plates.html">tidy_plates</a></span><span class="op">(</span></span>
<span>  <span class="va">multiple_plates_data</span>,</span>
<span>  how_many <span class="op">=</span> <span class="st">"multiple"</span>, <span class="co"># changed from "single"</span></span>
<span>  user_prompt <span class="op">=</span> <span class="cn">T</span>, <span class="co"># set user prompt option to TRUE</span></span>
<span>  direction <span class="op">=</span> <span class="st">"horizontal"</span>,</span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>After processing with user prompts, you can check if both options
give the same result once the same settings are used as input:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="va">tidy_dfs</span>, <span class="va">tidy_dfs_prompts</span><span class="op">)</span> <span class="co"># should be TRUE</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="tidy-data-from-multiple-plates-with-different-experimental-setups">Tidy data from multiple plates with different experimental
setups<a class="anchor" aria-label="anchor" href="#tidy-data-from-multiple-plates-with-different-experimental-setups"></a>
</h3>
<p>What if it gets more complicated and each group or experiment (or
both) has its own individual experimental set-up? But you still want
them in a common table for further processing? Don’t worry,
<code><a href="../reference/tidy_plates.html">tidy_plates()</a></code> can handle that too. In that case, the user
is prompted for the experimental setup as before but for every plate
separately.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a>tidy_dfs_individually <span class="ot">&lt;-</span> <span class="fu">tidy_plates</span>(</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>  multiple_plates_data,</span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a>  <span class="at">how_many =</span> <span class="st">"multiple"</span>,</span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a>  <span class="at">user_prompt =</span> T,</span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a>  <span class="at">multiple_structures =</span> T <span class="co"># set to TRUE to handle plates individually</span></span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a>  <span class="at">direction =</span> <span class="st">"horizontal"</span>,</span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a>  )</span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="further-data-processing-options">Further data processing options<a class="anchor" aria-label="anchor" href="#further-data-processing-options"></a>
</h2>
<p>This vignette shows how to add metadata to photometer files in plain
text format. However, this is certainly not where the analysis pipeline
ends. The <code>microdiluteR</code> package has more to offer, but this
will be covered in further vignettes in this R package:</p>
<ul>
<li>Validation of samples using either thresholds or manually specifying
invalid samples with the <code><a href="../reference/validate_cells.html">validate_cells()</a></code> and
<code><a href="../reference/validate_cells.html">update_validity()</a></code> functions, which include visual
inspection.</li>
<li>Usage of data cleaning with the <code><a href="../reference/subtract_T0.html">subtract_T0()</a></code>
function.</li>
<li>Calculate and summarize growth performance across multiple
timepoints via the <code><a href="../reference/calculate_growth_performance.html">calculate_growth_performance()</a></code> and
<code><a href="../reference/calculate_growth_performance.html">summarize_growth_performance()</a></code> functions.</li>
<li>Applying the sign test to assess whether growth performance
significantly differs from the baseline (usually the control) using the
<code><a href="../reference/apply_sign_test.html">apply_sign_test()</a></code> function.</li>
<li>Visualize your results, with or without sign test results in
asterisk notation, using the <code><a href="../reference/calculate_growth_performance.html">plot_growth_performance()</a></code>
function.</li>
</ul>
</div>
<div class="section level2">
<h2 id="acknowledgements">Acknowledgements<a class="anchor" aria-label="anchor" href="#acknowledgements"></a>
</h2>
<p>The <code>microdiluteR</code><a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;Development of this package on &lt;a href="https://github.com/silvia-eckert/microdiluteR" class="external-link"&gt;GitHub&lt;/a&gt;&lt;/p&gt;'><sup>1</sup></a> package would not be possible without the
great <a href="https://usethis.r-lib.org/index.html" class="external-link">usethis</a> and <a href="https://testthat.r-lib.org/index.html" class="external-link">testthat</a> packages, and
answers from the amazing <a href="https://stackoverflow.com/questions/tagged/r" class="external-link">stackoverflow</a>
community that has helped me to constantly improve my code (and save a
lot of nerves, especially with <a href="https://adv-r.hadley.nz/evaluation.html" class="external-link">tidy evaluation</a>).</p>
</div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Silvia Eckert.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
